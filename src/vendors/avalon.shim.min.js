(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("Avalon requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(L,e){var s=new Date-0;var j=L.document;var t=j.getElementsByTagName("head")[0];var C=t.insertBefore(document.createElement("avalon"),t.firstChild);C.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";C.setAttribute("ms-skip","1");C.className="avalonHide";var r=/\[native code\]/;function N(){if(L.console&&Q.debug){Function.apply.call(console.log,console,arguments)}}var a="$"+s;var h={};var o=/[^, ]+/g;var v=/\w+/g;var c=/^\[object SVG\w*Element\]$/;var n=/^\[object (?:Window|DOMWindow|global)\]$/;var i=Object.prototype;var f=i.hasOwnProperty;var l=i.toString;var d=Array.prototype;var u=d.slice;var p=L.dispatchEvent;var m=j.documentElement;var D=j.createDocumentFragment();var y=j.createElement("div");var g={};"Boolean Number String Function Array Date RegExp Object Error".replace(o,function(e){g["[object "+e+"]"]=e.toLowerCase()});var b=1024;var x=NaN;if(L.VBArray){x=document.documentMode||(L.XMLHttpRequest?7:6)}function $(){}function w(e){return Function.apply($,e)}function k(e,t){if(typeof e==="string"){e=e.match(o)||[]}var r={},a=t!==void 0?t:1;for(var n=0,i=e.length;n<i;n++){r[e[n]]=a}return r}var H=function(e){e=e||"avalon";return String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)};avalon=function(e){return new avalon.init(e)};avalon.nextTick=new function(){var e=L.setImmediate;var t=L.MutationObserver;if(e){return e.bind(L)}var r=[];function a(){var e=r.length;for(var t=0;t<e;t++){r[t]()}r=r.slice(e)}if(t){var n=document.createTextNode("avalon");new t(a).observe(n,{characterData:true});var i=false;return function(e){r.push(e);i=!i;n.data=i}}return function(e){setTimeout(e,4)}};if(!"司徒正美".trim){var T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(T,"")}}var E=!{toString:null}.propertyIsEnumerable("toString"),A=function(){}.propertyIsEnumerable("prototype"),_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=_.length;if(!Object.keys){Object.keys=function(e){var t=[];var r=A&&typeof e==="function";if(typeof e==="string"||e&&e.callee){for(var a=0;a<e.length;++a){t.push(String(a))}}else{for(var n in e){if(!(r&&n==="prototype")&&f.call(e,n)){t.push(String(n))}}}if(E){var i=e.constructor,o=i&&i.prototype===e;for(var l=0;l<S;l++){var s=_[l];if(!(o&&s==="constructor")&&f.call(e,s)){t.push(s)}}}return t}}if(!Array.isArray){Array.isArray=function(e){return l.call(e)==="[object Array]"}}if(!$.bind){Function.prototype.bind=function(r){if(arguments.length<2&&r===void 0)return this;var a=this,n=arguments;return function(){var e=[],t;for(t=1;t<n.length;t++)e.push(n[t]);for(t=0;t<arguments.length;t++)e.push(arguments[t]);return a.apply(r,e)}}}(function(){var t=Array.prototype;var s=t.slice;try{s.call(document.documentElement)}catch(e){t.slice=function(e,t){t=typeof t!=="undefined"?t:this.length;if(Array.isArray(this)){return s.call(this,e,t)}var r,a=[],n,i=this.length;var o=e||0;o=o>=0?o:i+o;var l=t?t:i;if(t<0){l=i+t}n=l-o;if(n>0){a=new Array(n);if(this.charAt){for(r=0;r<n;r++){a[r]=this.charAt(o+r)}}else{for(r=0;r<n;r++){a[r]=this[o+r]}}}return a}}function e(e,t,r){var a="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+r;return Function("fn,scope",a)}if(!/\[native code\]/.test(t.map)){var r={indexOf:function(e,t){var r=this.length,a=~~t;if(a<0)a+=r;for(;a<r;a++)if(this[a]===e)return a;return-1},lastIndexOf:function(e,t){var r=this.length,a=t==null?r-1:t;if(a<0)a=Math.max(0,r+a);for(;a>=0;a--)if(this[a]===e)return a;return-1},forEach:e("","_",""),filter:e("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:e("r=[],","r[i]=_","return r"),some:e("","if(_)return true","return false"),every:e("","if(!_)return false","return true")};for(var a in r){t[a]=r[a]}}})();avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?g[l.call(e)]||"object":typeof e};avalon.isFunction=typeof alert==="object"?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(e){return false}}:function(e){return l.call(e)==="[object Function]"};avalon.isWindow=function(e){if(!e)return false;return e==e.document&&e.document!=e};function O(e){return n.test(l.call(e))}if(O(L)){avalon.isWindow=O}var M,P;for(M in avalon({})){break}P=M!=="0";avalon.isPlainObject=function(e,t){if(!e||avalon.type(e)!=="object"||e.nodeType||avalon.isWindow(e)){return false}try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}if(P){for(t in e){return f.call(e,t)}}for(t in e){}return t===void 0||f.call(e,t)};if(r.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return l.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===i}}avalon.mix=avalon.fn.mix=function(){var e,t,r,a,n,i,o=arguments[0]||{},l=1,s=arguments.length,c=false;if(typeof o==="boolean"){c=o;o=arguments[1]||{};l++}if(typeof o!=="object"&&!avalon.isFunction(o)){o={}}if(l===s){o=this;l--}for(;l<s;l++){if((e=arguments[l])!=null){for(t in e){r=o[t];try{a=e[t]}catch(e){continue}if(o===a){continue}if(c&&a&&(avalon.isPlainObject(a)||(n=Array.isArray(a)))){if(n){n=false;i=r&&Array.isArray(r)?r:[]}else{i=r&&avalon.isPlainObject(r)?r:{}}o[t]=avalon.mix(c,i,a)}else if(a!==void 0){o[t]=a}}}}return o};function F(e,t){e=Math.floor(e)||0;return e<0?Math.max(t+e,0):Math.min(e,t)}avalon.mix({rword:o,subscribers:a,version:1.56,ui:{},log:N,slice:function(e,t,r){return u.call(e,t,r)},noop:$,error:function(e,t){throw(t||Error)(e)},oneObject:k,range:function(e,t,r){r||(r=1);if(t==null){t=e||0;e=0}var a=-1,n=Math.max(0,Math.ceil((t-e)/r)),i=new Array(n);while(++a<n){i[a]=e;e+=r}return i},eventHooks:{},bind:function(t,e,r,a){var n=avalon.eventHooks;var i=n[e];if(typeof i==="object"){e=i.type||e;a=i.phase||!!a;r=i.fix?i.fix(t,r):r}var o=p?r:function(e){r.call(t,U(e))};if(p){t.addEventListener(e,o,a)}else{t.attachEvent("on"+e,o)}return o},unbind:function(e,t,r,a){var n=avalon.eventHooks;var i=n[t];var o=r||$;if(typeof i==="object"){t=i.type||t;a=i.phase||!!a}if(p){e.removeEventListener(t,o,a)}else{e.detachEvent("on"+t,o)}},css:function(e,t,r){if(e instanceof avalon){e=e[0]}var a=/[_-]/.test(t)?ot(t):t,n;t=avalon.cssName(a)||a;if(r===void 0||typeof r==="boolean"){n=mt[a+":get"]||mt["@:get"];if(t==="background"){t="backgroundColor"}var i=n(e,t);return r===true?parseFloat(i)||0:i}else if(r===""){e.style[t]=""}else{if(r==null||r!==r){return}if(isFinite(r)&&!avalon.cssNumber[a]){r+="px"}n=mt[a+":set"]||mt["@:set"];n(e,t,r)}},each:function(e,t){if(e){var r=0;if(V(e)){for(var a=e.length;r<a;r++){if(t(r,e[r])===false)break}}else{for(r in e){if(e.hasOwnProperty(r)&&t(r,e[r])===false){break}}}}},getWidgetData:function(e,t){var r=avalon(e).data();var a={};for(var n in r){if(n.indexOf(t)===0){a[n.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=r[n]}}return a},Array:{ensure:function(e,t){if(e.indexOf(t)===-1){return e.push(t)}},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var r=e.indexOf(t);if(~r)return avalon.Array.removeAt(e,r);return false}}});var R=avalon.bindingHandlers={};var B=avalon.bindingExecutors={};var I=avalon.directives={};avalon.directive=function(e,t){R[e]=t.init=t.init||$;B[e]=t.update=t.update||$;return I[e]=t};function V(t){if(!t)return false;var e=t.length;if(e===e>>>0){var r=l.call(t).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(r))return false;if(r==="Array")return true;try{if({}.propertyIsEnumerable.call(t,"length")===false){return/^\s?function/.test(t.item||t.callee)}return true}catch(e){return!t.window}}return false}var q=new function(){function e(e){this.size=0;this.limit=e;this.head=this.tail=void 0;this._keymap={}}var t=e.prototype;t.put=function(e,t){var r={key:e,value:t};this._keymap[e]=r;if(this.tail){this.tail.newer=r;r.older=this.tail}else{this.head=r}this.tail=r;if(this.size===this.limit){this.shift()}else{this.size++}return t};t.shift=function(){var e=this.head;if(e){this.head=this.head.newer;this.head.older=e.newer=e.older=this._keymap[e.key]=void 0;delete this._keymap[e.key]}};t.get=function(e){var t=this._keymap[e];if(t===void 0)return;if(t===this.tail){return t.value}if(t.newer){if(t===this.head){this.head=t.newer}t.newer.older=t.older}if(t.older){t.older.newer=t.newer}t.newer=void 0;t.older=this.tail;if(this.tail){this.tail.newer=t}this.tail=t;return t.value};return e};avalon.contains=function(e,t){try{while(t=t.parentNode)if(t===e)return true;return false}catch(e){return false}};if(!j.contains){j.contains=function(e){return avalon.contains(j,e)}}function z(){return(new XMLSerializer).serializeToString(this)}if(L.SVGElement){if(!j.createTextNode("x").contains){Node.prototype.contains=function(e){return!!(this.compareDocumentPosition(e)&16)}}var W="http://www.w3.org/2000/svg";var X=j.createElementNS(W,"svg");X.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!c.test(X.firstChild)){function Y(e,t){if(e&&e.childNodes){var r=e.childNodes;for(var a=0,n;n=r[a++];){if(n.tagName){var i=j.createElementNS(W,n.tagName.toLowerCase());d.forEach.call(n.attributes,function(e){i.setAttribute(e.name,e.value)});Y(n,i);t.appendChild(i)}}}}Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:true,configurable:true,get:z,set:function(e){var t=this.tagName.toLowerCase(),r=this.parentNode,a=avalon.parseHTML(e);if(t==="svg"){r.insertBefore(a,this)}else{var n=j.createDocumentFragment();Y(a,n);r.insertBefore(n,this)}r.removeChild(this)}},innerHTML:{enumerable:true,configurable:true,get:function(){var e=this.outerHTML;var t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var r=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(r,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);Y(t,this)}}}})}}if(!m.outerHTML&&L.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",z)}var G=/^(?:mouse|contextmenu|drag)|click/;function U(e){var t={};for(var r in e){t[r]=e[r]}var a=t.target=e.srcElement;if(e.type.indexOf("key")===0){t.which=e.charCode!=null?e.charCode:e.keyCode}else if(G.test(e.type)){var n=a.ownerDocument||j;var i=n.compatMode==="BackCompat"?n.body:n.documentElement;t.pageX=e.clientX+(i.scrollLeft>>0)-(i.clientLeft>>0);t.pageY=e.clientY+(i.scrollTop>>0)-(i.clientTop>>0);t.wheelDeltaY=t.wheelDelta;t.wheelDeltaX=0}t.timeStamp=new Date-0;t.originalEvent=e;t.preventDefault=function(){e.returnValue=false};t.stopPropagation=function(){e.cancelBubble=true};return t}var J=avalon.eventHooks;if(!("onmouseenter"in m)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,e){J[n]={type:e,fix:function(r,a){return function(e){var t=e.relatedTarget;if(!t||t!==r&&!(r.compareDocumentPosition(t)&16)){delete e.type;e.type=n;return a.call(r,e)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){if(L[e]&&!J.animationend){J.animationend={type:t}}});if(!("oninput"in j.createElement("input"))){J.input={type:"propertychange",fix:function(t,r){return function(e){if(e.propertyName==="value"){e.type="input";return r.call(t,e)}}}}}if(j.onmousewheel===void 0){var Z=j.onwheel!==void 0?"wheel":"DOMMouseScroll";var K=Z==="wheel"?"deltaY":"detail";J.mousewheel={type:Z,fix:function(t,r){return function(e){e.wheelDeltaY=e.wheelDelta=e[K]>0?-120:120;e.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(e,"type",{value:"mousewheel"})}r.call(t,e)}}}}function Q(e){for(var t in e){if(!f.call(e,t))continue;var r=e[t];if(typeof Q.plugins[t]==="function"){Q.plugins[t](r)}else if(typeof Q[t]==="object"){avalon.mix(Q[t],r)}else{Q[t]=r}}return this}avalon.config=Q;var ee,te,re,ae,ne,ie=/[-.*+?^${}()|[\]\/\\]/g;function oe(e){return(e+"").replace(ie,"\\$&")}var le={interpolate:function(e){ee=e[0];te=e[1];if(ee===te){throw new SyntaxError("openTag!==closeTag");var t=ee+"test"+te;y.innerHTML=t;if(y.innerHTML!==t&&y.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}y.innerHTML=""}Q.openTag=ee;Q.closeTag=te;var r=oe(ee),a=oe(te);re=new RegExp(r+"([\\s\\S]*)"+a);ae=new RegExp(r+"([\\s\\S]*)"+a,"g");ne=new RegExp(r+"[\\s\\S]*"+a+"|\\sms-")}};Q.plugins=le;Q.plugins["interpolate"](["{{","}}"]);Q.async=true;Q.debug=true;Q.paths={};Q.shim={};Q.maxRepeatSize=100;function se(e,t){var r=this.$events||(this.$events={}),a=r[e]||(r[e]=[]);if(typeof t==="function"){var n=t;n.uuid="_"+ ++b;t={element:m,type:"user-watcher",handler:$,vmodels:[this],expr:e,uuid:n.uuid};t.wildcard=/\*/.test(e)}if(!t.update){if(/\w\.*\B/.test(e)||e==="*"){t.getter=$;var i=this;t.update=function(){var e=this.fireArgs||[];if(e[2])t.handler.apply(i,e);delete this.fireArgs};a.sync=true;avalon.Array.ensure(a,t)}else{avalon.injectBinding(t)}if(n){t.handler=n}}else if(!t.oneTime){avalon.Array.ensure(a,t)}return function(){t.update=t.getter=t.handler=$;t.element=j.createElement("a")}}function ce(e,t){var r=this.$events;if(r&&r[e]){if(t){t[2]=e}var a=r[e];ue(a,t);if(t&&r["*"]&&!/\./.test(e)){for(var n,i=0;n=r["*"][i++];){try{n.handler.apply(this,t)}catch(e){}}}var o=this.$up;if(o){if(this.$pathname){ce.call(o,this.$pathname+"."+e,t)}ce.call(o,"*."+e,t)}}else{o=this.$up;if(this.$ups){for(var l in this.$ups){ce.call(this.$ups[l],l+"."+e,t)}return}if(o){var s=this.$pathname;if(s==="")s="*";var c=s+"."+e;a=c.split(".");if(a.indexOf("*")===-1){ce.call(o,c,t);a[1]="*";ce.call(o,a.join("."),t)}else{ce.call(o,c,t)}}}}function fe(e,t){do{if(e.$watch){var r=e.$events||(e.$events={});var a=r[t]||(r[t]=[]);Pe.collectDependency(a);return}e=e.$up;if(e){t=e.$pathname+"."+t}else{break}}while(true)}function ue(e,t){if(!e)return;if(new Date-qe>444&&typeof e[0]==="object"){Xe()}var r=[],a=[];for(var n=0,i;i=e[n++];){if(i.type==="user-watcher"){r.push(i)}else{a.push(i)}}if(Q.async){Br.render();for(n=0;i=a[n++];){if(i.update){i.uuid=i.uuid||"_"+ ++b;var o=i.uuid;if(!Br.queue[o]){Br.queue[o]="__";Br.queue.push(i)}}}}else{for(n=0;i=a[n++];){if(i.update){i.update()}}}for(n=0;i=r[n++];){if(t&&t[2]===i.expr||i.wildcard){i.fireArgs=t}i.update()}}var ve=avalon.vmodels={};avalon.define=function(e){var t=e.$id;if(!t){N("warning: vm必须指定$id")}var r=ye(e);r.$id=t;return ve[t]=r};var de=k("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors,$ups");var pe=Object.defineProperty;var he=true;try{pe({},"_",{value:"x"});var me=Object.defineProperties}catch(e){he=false}function ye(e,t){t=t||{};t.watch=true;return be(e,t)}function ge(){}function be(a,e){if(!a||a.$id&&a.$accessors||a.nodeName&&a.nodeType>0){return a}e=e||h;var t=e.force||h;var n=e.old;var r=n&&n.$accessors||h;var i=new ge;var o={};var l={};var s=[];var c=[];var f={};if(a.$skipArray){f=k(a.$skipArray);delete a.$skipArray}var u=a.$computed;if(u){delete a.$computed;for(var v in u){l[v]=true;(function(a,n){var i;o[a]={get:function(){return i=n.get.call(this)},set:function(e){if(typeof n.set==="function"){var t=i;n.set.call(this,e);var r=this[a];if(this.$fire&&r!==t){this.$fire(a,r,t)}}},enumerable:true,configurable:true}})(v,u[v])}}for(v in a){var d=a[v];if(!de[v])l[v]=true;if(typeof d==="function"||d&&d.nodeName&&d.nodeType>0||!t[v]&&(v.charAt(0)==="$"||de[v]||f[v])){s.push(v)}else if(xe(d)){N("warning:计算属性建议放在$computed对象中统一定义");(function(a,n){var i;o[a]={get:function(){return i=n.get.call(this)},set:function(e){if(typeof n.set==="function"){var t=i;n.set.call(this,e);var r=this[a];if(this.$fire&&r!==t){this.$fire(a,r,t)}}},enumerable:true,configurable:true}})(v,d)}else{c.push(v);if(r[v]){o[v]=r[v]}else{o[v]=$e(v,d)}}}o["$model"]=Ee;i=me(i,o,a);function p(e){return l[e]===true}s.forEach(function(e){i[e]=a[e]});ke(i,"$ups",null);ke(i,"$id","anonymous");ke(i,"$up",n?n.$up:null);ke(i,"$track",Object.keys(l));ke(i,"$active",false);ke(i,"$pathname",n?n.$pathname:"");ke(i,"$accessors",o);ke(i,"hasOwnProperty",p);if(e.watch){ke(i,"$watch",function(){return se.apply(i,arguments)});ke(i,"$fire",function(e,t){if(e.indexOf("all!")===0){var r=e.slice(4);for(var a in avalon.vmodels){var n=avalon.vmodels[a];n.$fire&&n.$fire.apply(n,[r,t])}}else{ce.call(i,e,[t])}})}c.forEach(function(e){var t=n&&n[e];var r=i[e]=a[e];if(r&&typeof r==="object"){r.$up=i;r.$pathname=e}ce.call(i,e,[r,t])});for(v in u){d=i[v]}i.$active=true;return i}function xe(e){if(e&&typeof e==="object"){for(var t in e){if(t!=="get"&&t!=="set"){return false}}return typeof e.get==="function"}}function $e(r,a){var n;a=NaN;return{get:function(){if(this.$active){fe(this,r)}return a},set:function(e){if(a===e)return;var t=a;n=we(e,a);if(n){a=n}else{n=void 0;a=e}if(Object(n)===n){n.$pathname=r;n.$up=this}if(this.$active){ce.call(this,r,[a,t])}},enumerable:true,configurable:true}}function we(e,t,r,a){if(Array.isArray(e)){return Ne(e,t,a)}else if(avalon.isPlainObject(e)){if(t&&typeof t==="object"){var n=Ce(e);var i=Ce(t);if(n.join(";")===i.join(";")){for(var o in e){if(e.hasOwnProperty(o)){t[o]=e[o]}}return t}t.$active=false}return be(e,{old:t,watch:a})}if(r){return e}}var Ce=r.test(Object.key)?Object.key:function(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)&&!de[r]){t.push(r)}}return t};function Ne(r,e,t){if(e&&e.splice){var a=[0,e.length].concat(r);e.splice.apply(e,a);return e}else{for(var n in Me){r[n]=Me[n]}ke(r,"$up",null);ke(r,"$pathname","");ke(r,"$track",De(r.length));r._=be({length:NaN},{watch:true});r._.length=r.length;r._.$watch("length",function(e,t){ce.call(r.$up,r.$pathname+".length",[e,t])});if(t){ke(r,"$watch",function(){return se.apply(r,arguments)})}if(p){Object.defineProperty(r,"$model",Ee)}else{r.$model=Te(r)}for(var i=0,o=r.length;i<o;i++){var l=r[i]=we(r[i],0,1,1);if(Object(l)===l){l.$up=r}}return r}}function ke(e,t,r){if(he){Object.defineProperty(e,t,{value:r,writable:true,enumerable:false,configurable:true})}else{e[t]=r}}function Te(e){var t=avalon.type(e);if(t==="array"){var r=[];for(var a=0;a<e.length;a++){r[a]=Te(e[a])}return r}else if(t==="object"){var n={};for(a in e){if(a==="__proxy__"||a==="__data__"||a==="__const__")continue;if(e.hasOwnProperty(a)){var i=e[a];n[a]=i&&i.nodeType?i:Te(i)}}return n}return e}var Ee={get:function(){return Te(this)},set:$,enumerable:false,configurable:true};if(!he){if("__defineGetter__"in avalon){pe=function(e,t,r){if("value"in r){e[t]=r.value}if("get"in r){e.__defineGetter__(t,r.get)}if("set"in r){e.__defineSetter__(t,r.set)}return e};me=function(e,t){for(var r in t){if(t.hasOwnProperty(r)){pe(e,r,t[r])}}return e}}if(x){var Ae={};L.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function _e(e,t,r,a){var n=t[r];if(arguments.length===4){n.set.call(e,a)}else{return n.get.call(e)}}me=function(e,t,r){var a=[];a.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+s+", p"+s+")","\t\tSet [__data__] = d"+s+": set [__proxy__] = p"+s,"\t\tSet [__const__] = Me","\tEnd Function");var n={};for(e in t){n[e]=true;a.push("\tPublic Property Let ["+e+"](val"+s+")",'\t\tCall [__proxy__](Me,[__data__], "'+e+'", val'+s+")","\tEnd Property","\tPublic Property Set ["+e+"](val"+s+")",'\t\tCall [__proxy__](Me,[__data__], "'+e+'", val'+s+")","\tEnd Property","\tPublic Property Get ["+e+"]","\tOn Error Resume Next","\t\tSet["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"\tIf Err.Number <> 0 Then","\t\t["+e+'] = [__proxy__](Me,[__data__],"'+e+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")}for(e in r){if(n[e]!==true){n[e]=true;a.push("\tPublic ["+e+"]")}}for(e in de){if(n[e]!==true){n[e]=true;a.push("\tPublic ["+e+"]")}}a.push("\tPublic ["+"hasOwnProperty"+"]");a.push("End Class");var i=a.join("\r\n");var o=Ae[i];if(!o){o=H("VBClass");L.parseVB("Class "+o+i);L.parseVB(["Function "+o+"Factory(a, b)","\tDim o","\tSet o = (New "+o+")(a, b)","\tSet "+o+"Factory = o","End Function"].join("\r\n"));Ae[i]=o}var l=L[o+"Factory"](t,_e);return l}}}var Se=["push","pop","shift","unshift","splice"];var Oe=Array.prototype;var Me={notify:function(){ce.call(this.$up,this.$pathname)},set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length){throw Error(e+"set方法的第一个参数不能大于原数组长度")}ce.call(this.$up,this.$pathname+".*",[t,this[e]]);this.splice(e,1,t)}},contains:function(e){return this.indexOf(e)!==-1},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if(e>>>0===e){return this.splice(e,1)}return[]},size:function(){return this._.length},removeAll:function(e){if(Array.isArray(e)){for(var t=this.length-1;t>=0;t--){if(e.indexOf(this[t])!==-1){Le.call(this.$track,t,1);Le.call(this,t,1)}}}else if(typeof e==="function"){for(t=this.length-1;t>=0;t--){var r=this[t];if(e(r,t)){Le.call(this.$track,t,1);Le.call(this,t,1)}}}else{Le.call(this.$track,0,this.length);Le.call(this,0,this.length)}if(!p){this.$model=Te(this)}this.notify();this._.length=this.length},clear:function(){this.removeAll();return this}};var Le=Oe.splice;Se.forEach(function(n){var i=Oe[n];Me[n]=function(){var e=[];for(var t=0,r=arguments.length;t<r;t++){e[t]=we(arguments[t],0,1,1)}var a=i.apply(this,e);He(this.$track,n,e);if(!p){this.$model=Te(this)}this.notify();this._.length=this.length;return a}});"sort,reverse".replace(o,function(f){Me[f]=function(){var e=this.concat();var t=this;var r=Math.random();var a=[];var n=false;Oe[f].apply(t,arguments);for(var i=0,o=e.length;i<o;i++){var l=t[i];var s=e[i];if(l===s){a.push(i)}else{var c=e.indexOf(l);a.push(c);e[c]=r;n=true}}if(n){je(this.$track,a);if(!p){this.$model=Te(this)}this.notify()}return this}});function je(e,t){var r={};for(var a=0,n=t.length;a<n;a++){r[a]=e[a];var i=t[a];if(i in r){e[a]=r[i];delete r[i]}else{e[a]=e[i]}}}function De(e){var t=[];for(var r=0;r<e;r++){t[r]=H("$proxy$each")}return t}function He(e,t,r){switch(t){case"push":case"unshift":r=De(r.length);break;case"splice":if(r.length>2){var a=r[1];var n=r.length-2;r=[r[0],r[1]].concat(De(r.length-2))}break}Array.prototype[t].apply(e,r)}var Pe=function(){var t=[];var r;return{begin:function(e){t.push(r);r=e},end:function(){r=t.pop()},collectDependency:function(e){if(r){r.callback(e)}}}}();var Fe=/^on$/;function Re(){return new Date-0}avalon.injectBinding=function(s){s.handler=s.handler||I[s.type].update||$;s.update=function(){var e=false;if(!s.getter){e=true;Pe.begin({callback:function(e){Be(e,s)}});s.getter=Vt(s.expr,s.vmodels,s);s.observers.forEach(function(e){e.v.$watch(e.p,s)});delete s.observers}try{var t=s.fireArgs,r,a;delete s.fireArgs;if(!t){if(s.type==="on"){r=s.getter+""}else{try{r=s.getter.apply(0,s.args)}catch(e){r=null}}}else{r=t[0];a=t[1]}a=typeof a==="undefined"?s.oldValue:a;if(s._filters){r=Qa.$filter.apply(0,[r].concat(s._filters))}if(s.signature){var n=avalon.type(r);if(n!=="array"&&n!=="object"){throw Error("warning:"+s.expr+"只能是对象或数组")}s.xtype=n;var i=Ie(s.proxies||[],n);var o=r.$track||(n==="array"?De(r.length):Object.keys(r));s.track=o;if(i!==o.join(";")){s.handler(r,a);s.oldValue=1}}else if(Array.isArray(r)?r.length!==(a&&a.length):false){s.handler(r,a);s.oldValue=r.concat()}else if(!("oldValue"in s)||r!==a){s.handler(r,a);s.oldValue=Array.isArray(r)?r.concat():r}}catch(e){delete s.getter;N("warning:exception throwed in [avalon.injectBinding] ",e);var l=s.element;if(l&&l.nodeType===3){l.nodeValue=ee+(s.oneTime?"::":"")+s.expr+te}}finally{e&&Pe.end()}};s.update()};function Be(e,t){if(t.oneTime)return;if(e&&avalon.Array.ensure(e,t)&&t.element){ze(t,e);if(new Date-qe>444){Xe()}}}function Ie(e,t){var r=[];for(var a=0,n;n=e[a++];){r.push(t?n.$id:n.$key)}return r.join(";")}var Ve=avalon.$$subscribers=[];var qe=new Date;function ze(e,t){e.list=t;e.i=~~e.i;if(!e.uuid){e.uuid="_"+ ++b}if(!Ve[e.uuid]){Ve[e.uuid]="__";Ve.push(e)}}var We=0;function Xe(e){var t=We||Ve.length;var r=0;while(e=Ve[--t]){if(e.i<7){if(e.element===null){Ve.splice(t,1);if(e.list){avalon.Array.remove(e.list,e);delete Ve[e.uuid]}continue}if(Ge(e.element)){Ve.splice(t,1);avalon.Array.remove(e.list,e);Ye(e);if(r++>500){We=t;break}continue}e.i++;if(e.i===7){e.i=14}}else{e.i--}}qe=new Date}function Ye(e){delete Ve[e.uuid];e.element=null;e.rollback&&e.rollback();for(var t in e){e[t]=null}}function Ge(e){try{var t=e.parentNode.nodeType}catch(e){return true}if(e.ifRemove){if(!m.contains(e.ifRemove)&&C===e.parentNode){e.parentNode&&e.parentNode.removeChild(e);return true}}return e.msRetain?0:e.nodeType===1?!m.contains(e):!avalon.contains(m,e)}var Ue={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:p?[0,"",""]:[1,"X<div>","</div>"]};Ue.th=Ue.td;Ue.optgroup=Ue.option;Ue.tbody=Ue.tfoot=Ue.colgroup=Ue.caption=Ue.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(o,function(e){Ue[e]=Ue.g});var Je=/<([\w:]+)/;var Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;var Ke=p?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi;var Qe=k(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var et=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var tt=j.createElement("script");var rt=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=D.cloneNode(false);if(typeof e!=="string"){return t}if(!rt.test(e)){t.appendChild(j.createTextNode(e));return t}e=e.replace(Ze,"<$1></$2>").trim();var r=(Je.exec(e)||["",""])[1].toLowerCase(),a=Ue[r]||Ue._default,n=y,i,o;if(!p){e=e.replace(Ke,"<br class=msNoScope>$1")}n.innerHTML=a[1]+e+a[2];var l=n.getElementsByTagName("script");if(l.length){for(var s=0,c;c=l[s++];){if(Qe[c.type]){o=tt.cloneNode(false);d.forEach.call(c.attributes,function(e){if(e&&e.specified){o[e.name]=e.value;o.setAttribute(e.name,e.value)}});o.text=c.text;c.parentNode.replaceChild(o,c)}}}if(!p){var f=a[1]==="X<div>"?n.lastChild.firstChild:n.lastChild;if(f&&f.tagName==="TABLE"&&r!=="tbody"){for(l=f.childNodes,s=0;c=l[s++];){if(c.tagName==="TBODY"&&!c.innerHTML){f.removeChild(c);break}}}l=n.getElementsByTagName("br");var u=l.length;while(c=l[--u]){if(c.className==="msNoScope"){c.parentNode.removeChild(c)}}for(l=n.all,s=0;c=l[s++];){if(at(c)){nt(c)}}}for(s=a[0];s--;n=n.lastChild){}while(i=n.firstChild){t.appendChild(i)}return t};function at(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&e.outerText===""}function nt(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(e,t){if(!p&&(!Ke.test(t)&&!et.test(t))){try{e.innerHTML=t;return}catch(e){}}var r=this.parseHTML(t);this.clearHTML(e).appendChild(r)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};function it(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function ot(e){if(!e||e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}var lt={_toString:function(){var e=this.node;var t=e.className;var r=typeof t==="string"?t:t.baseVal;return r.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;if(c.test(t)){t.setAttribute("class",e)}else{t.className=e}}};function st(e){if(!("classList"in e)){e.classList={node:e};for(var t in lt){e.classList[t.slice(1)]=lt[t]}}return e.classList}"add,remove".replace(o,function(r){avalon.fn[r+"Class"]=function(e){var t=this[0];if(e&&typeof e==="string"&&t&&t.nodeType===1){e.replace(/\S+/g,function(e){st(t)[r](e)})}return this}});avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return t.nodeType===1&&st(t).contains(e)},toggleClass:function(e,t){var r,a=0;var n=String(e).match(/\S+/g)||[];var i=typeof t==="boolean";while(r=n[a++]){var o=i?t:!this.hasClass(r);this[o?"addClass":"removeClass"](r)}return this},attr:function(e,t){if(arguments.length===2){this[0].setAttribute(e,t);return this}else{return this[0].getAttribute(e)}},data:function(t,e){t="data-"+it(t||"");switch(arguments.length){case 2:this.attr(t,e);return this;case 1:var r=this.attr(t);return ct(r);case 0:var a={};d.forEach.call(this[0].attributes,function(e){if(e){t=e.name;if(!t.indexOf("data-")){t=ot(t.slice(5));a[t]=ct(e.value)}}});return a}},removeData:function(e){e="data-"+it(e);this[0].removeAttribute(e);return this},css:function(e,t){if(avalon.isPlainObject(e)){for(var r in e){avalon.css(this,r,e[r])}}else{var a=avalon.css(this,e,t)}return a!==void 0?a:this},position:function(){var e,t,r=this[0],a={top:0,left:0};if(!r){return}if(this.css("position")==="fixed"){t=r.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(e[0].tagName!=="HTML"){a=e.offset()}a.top+=avalon.css(e[0],"borderTopWidth",true);a.left+=avalon.css(e[0],"borderLeftWidth",true);a.top-=e.scrollTop();a.left-=e.scrollLeft()}return{top:t.top-a.top-avalon.css(r,"marginTop",true),left:t.left-a.left-avalon.css(r,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||m)},bind:function(e,t,r){if(this[0]){return avalon.bind(this[0],e,t,r)}},unbind:function(e,t,r){if(this[0]){avalon.unbind(this[0],e,t,r)}return this},val:function(e){var t=this[0];if(t&&t.nodeType===1){var r=arguments.length===0;var a=r?":get":":set";var n=St[At(t)+a];if(n){var i=n(t,e)}else if(r){return(t.value||"").replace(/\r/g,"")}else{t.value=e}}return r?i:this}});function ct(e){try{if(typeof e==="object")return e;e=e==="true"?true:e==="false"?false:e==="null"?null:+e+""===e?+e:ft.test(e)?avalon.parseJSON(e):e}catch(e){}return e}var ft=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ut=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,dt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,pt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=L.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(ut.test(e.replace(dt,"@").replace(pt,"]").replace(vt,""))){return new Function("return "+e)()}}avalon.error("Invalid JSON: "+e)}return e};avalon.fireDom=function(e,t,r){if(j.createEvent){var a=j.createEvent("Events");a.initEvent(t,true,true,r);avalon.mix(a,r);e.dispatchEvent(a)}else if(m.contains(e)){a=j.createEventObject();avalon.mix(a,r);e.fireEvent("on"+t,a)}};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){avalon.fn[n]=function(e){var t=this[0]||{},r=ht(t),a=n==="scrollTop";if(!arguments.length){return r?i in r?r[i]:m[n]:t[n]}else{if(r){r.scrollTo(!a?e:avalon(r).scrollLeft(),a?e:avalon(r).scrollTop())}else{t[n]=e}}}});function ht(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var mt=avalon.cssHooks={};var yt=["","-webkit-","-o-","-moz-","-ms-"];var gt={float:p?"cssFloat":"styleFloat"};avalon.cssNumber=k("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(e,t,r){if(gt[e]){return gt[e]}t=t||m.style;for(var a=0,n=yt.length;a<n;a++){r=ot(yt[a]+e);if(r in t){return gt[e]=r}}return null};mt["@:set"]=function(e,t,r){try{e.style[t]=r}catch(e){}};if(L.getComputedStyle){mt["@:get"]=function(e,t){if(!e||!e.style){throw new Error("getComputedStyle要求传入一个节点 "+e)}var r,a=getComputedStyle(e,null);if(a){r=t==="filter"?a.getPropertyValue(t):a[t];if(r===""){r=e.style[t]}}return r};mt["opacity:get"]=function(e){var t=mt["@:get"](e,"opacity");return t===""?"1":t}}else{var bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var xt=/^(top|right|bottom|left)$/;var $t=/alpha\([^)]*\)/i;var wt=!!L.XDomainRequest;var Ct="DXImageTransform.Microsoft.Alpha";var Nt={thin:wt?"1px":"2px",medium:wt?"3px":"4px",thick:wt?"5px":"6px"};mt["@:get"]=function(e,t){var r=e.currentStyle;var a=r[t];if(bt.test(a)&&!xt.test(a)){var n=e.style,i=n.left,o=e.runtimeStyle.left;e.runtimeStyle.left=r.left;n.left=t==="fontSize"?"1em":a||0;a=n.pixelLeft+"px";n.left=i;e.runtimeStyle.left=o}if(a==="medium"){t=t.replace("Width","Style");if(r[t]==="none"){a="0px"}}return a===""?"auto":Nt[a]||a};mt["opacity:set"]=function(e,t,r){var a=e.style;var n=isFinite(r)&&r<=1?"alpha(opacity="+r*100+")":"";var i=a.filter||"";a.zoom=1;a.filter=($t.test(i)?i.replace($t,n):i+" "+n).trim();if(!a.filter){a.removeAttribute("filter")}};mt["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[Ct],r=t&&t.enabled?t.opacity:100;return r/100+""}}"top,left".replace(o,function(r){mt[r+":get"]=function(e){var t=mt["@:get"](e,r);return/px$/.test(t)?t:avalon(e).position()[r]+"px"}});var kt={position:"absolute",visibility:"hidden",display:"block"};var Tt=/^(none|table(?!-c[ea]).+)/;function Et(e,t){if(e.offsetWidth<=0){if(Tt.test(mt["@:get"](e,"display"))){var r={node:e};for(var a in kt){r[a]=e.style[a];e.style[a]=kt[a]}t.push(r)}var n=e.parentNode;if(n&&n.nodeType===1){Et(n,t)}}}"Width,Height".replace(o,function(i){var o=i.toLowerCase(),a="client"+i,n="scroll"+i,l="offset"+i;mt[o+":get"]=function(e,t,r){var a=-4;if(typeof r==="number"){a=r}t=i==="Width"?["Left","Right"]:["Top","Bottom"];var n=e[l];if(a===2){return n+avalon.css(e,"margin"+t[0],true)+avalon.css(e,"margin"+t[1],true)}if(a<0){n=n-avalon.css(e,"border"+t[0]+"Width",true)-avalon.css(e,"border"+t[1]+"Width",true)}if(a===-4){n=n-avalon.css(e,"padding"+t[0],true)-avalon.css(e,"padding"+t[1],true)}return n};mt[o+"&get"]=function(e){var t=[];Et(e,t);var r=mt[o+":get"](e);for(var a=0,n;n=t[a++];){e=n.node;for(var i in n){if(typeof n[i]==="string"){e.style[i]=n[i]}}}return r};avalon.fn[o]=function(e){var t=this[0];if(arguments.length===0){if(t.setTimeout){return t["inner"+i]||t.document.documentElement[a]||t.document.body[a]}if(t.nodeType===9){var r=t.documentElement;return Math.max(t.body[n],r[n],t.body[l],r[l],r[a])}return mt[o+"&get"](t)}else{return this.css(o,e)}};avalon.fn["inner"+i]=function(){return mt[o+":get"](this[0],void 0,-2)};avalon.fn["outer"+i]=function(e){return mt[o+":get"](this[0],void 0,e===true?2:0)}});avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument){return t}var r=e.ownerDocument,a=r.body,n=r.documentElement,i=r.defaultView||r.parentWindow;if(!avalon.contains(n,e)){return t}if(e.getBoundingClientRect){t=e.getBoundingClientRect()}var o=n.clientTop||a.clientTop,l=n.clientLeft||a.clientLeft,s=Math.max(i.pageYOffset||0,n.scrollTop,a.scrollTop),c=Math.max(i.pageXOffset||0,n.scrollLeft,a.scrollLeft);return{top:t.top+s-o,left:t.left+c-l}};function At(e){var t=e.tagName.toLowerCase();return t==="input"&&/checkbox|radio/.test(e.type)?"checked":t}var _t=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var St={"option:get":x?function(e){return _t.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){var r,a=e.options,n=e.selectedIndex,i=St["option:get"],o=e.type==="select-one"||n<0,l=o?null:[],s=o?n+1:a.length,c=n<0?s:o?n:0;for(;c<s;c++){r=a[c];if((r.selected||c===n)&&!r.disabled){t=i(r);if(o){return t}l.push(t)}}return l},"select:set":function(e,t,r){t=[].concat(t);var a=St["option:get"];for(var n=0,i;i=e.options[n++];){if(i.selected=t.indexOf(a(i))>-1){r=true}}if(!r){e.selectedIndex=-1}}};var Ot={};var Mt=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");Mt.replace(/\w+/g,function(e){Ot[e]=true});var Lt=/[a-z_$]/i;var jt=/[\s\uFEFF\xA0]/;function Dt(e,t){var r=[];var a=!!t;t=t||0;var n="unknown";var i="";for(var o=0;o<e.length;o++){var l=e.charAt(o);if(l==="'"||l==='"'){if(n==="unknown"){n=l}else if(n===l){n="unknown"}}else if(l==="\\"){if(n==="'"||n==='"'){o++}}else if(Lt.test(l)){if(n==="unknown"){n="variable";i=l}else if(n==="maybePath"){i=r.pop();i+="."+l;n="variable"}else if(n==="variable"){i+=l}}else if(/\w/.test(l)){if(n==="variable"){i+=l}}else if(l==="."){if(n==="variable"){if(i){r.push(i);i="";n="maybePath"}}}else if(l==="["){if(n==="variable"||n==="maybePath"){if(i){r.push(i);i=""}var s=r.length;var c=r[s-1];var f=Dt(e.slice(o),o);if(f.length){r[s-1]=c+".*";r=f.concat(r)}else{var u=e.slice(o+1,f.i);try{var v=w(["return "+u])();r[s-1]=c+"."+v}catch(e){}}n="maybePath";o=f.i}}else if(l==="]"){if(a){r.i=o+t;Ht(r,i);return r}}else if(jt.test(l)&&l!=="\r"&&l!=="\n"){if(n==="variable"){if(Ht(r,i)){n="maybePath"}i=""}}else{Ht(r,i);n="unknown";i=""}}Ht(r,i);return r}function Ht(e,t){if(t&&!Ot[t]){e.push(t);return true}}function Pt(e,t,r,a){var n=[],i=" = "+r+".";for(var o=e.length,l;l=e[--o];){var s=l.split("."),c;var f=s[0];while(c=s.shift()){if(t.hasOwnProperty(c)){n.push(f+i+f);a.observers.push({v:t,p:l});e.splice(o,1)}else{break}}}return n}var Ft=/(\$proxy\$[a-z]+)\d+$/;var Rt=new q(218);var Bt=new q(128);function It(e){e=e.trim();var t=Rt.get(e);if(t){return t.concat()}var r=Dt(e);var a={};var n=[];for(var i=0,o;o=r[i++];){if(!a[o]){a[o]=1;n.push(o)}}return Rt.put(e,n).concat()}function Vt(e,t,r){var a=r.filters;if(typeof a==="string"&&a.trim()&&!r._filters){r._filters=Ut(a.trim())}var n=It(e);var i=new Date-0;var o=[];var l=[];var s=[];r.observers=[];for(var c=0,f=t.length;c<f;c++){if(n.length){var u="vm"+i+"_"+c;l.push(u);s.push(t[c]);o.push.apply(o,Pt(n,t[c],u,r))}}r.args=s;var v=r.type;var d=t.map(function(e){return String(e.$id).replace(Ft,"$1")})+e+v;var p=Bt.get(d);if(p){if(v==="duplex"){var h=Bt.get(d+"setter");r.setter=h.apply(h,r.args)}return r.getter=p}if(!o.length){o.push("fix"+i)}if(v==="duplex"){var m={};o.forEach(function(e){var t=e.split("=");m[t[0].trim()]=t[1].trim()});e=e.replace(/[\$\w]+/,function(e){return m[e]?m[e]:e});var y=w(l.concat("'use strict';"+"return function(vvv){"+e+" = vvv\n}\n"));Bt.put(d+"setter",y);r.setter=y.apply(y,r.args)}if(v==="on"){if(e.indexOf("(")===-1){e+=".call(this, $event)"}else{e=e.replace("(",".call(this,")}l.push("$event");e="\nreturn "+e+";";var g=e.lastIndexOf("\nreturn");var b=e.slice(0,g);var x=e.slice(g);e=b+"\n"+x}else{e="\nreturn "+e+";"}p=w(l.concat("'use strict';\nvar "+o.join(",\n")+e));return Bt.put(d,p)}function qt(e){var t=re.test(e);if(t){var r=Pr(e);if(r.length===1){return r[0].expr}return r.map(function(e){return e.type?"("+e.expr+")":ar(e.expr)}).join(" + ")}else{return e}}avalon.normalizeExpr=qt;avalon.parseExprProxy=Vt;var zt=/\)\s*$/;var Wt=/\)\s*\|/g;var Xt=/\|\s*([$\w]+)/g;var Yt=/"\s*\["/g;var Gt=/"\s*\(/g;function Ut(e){e=e.replace(zt,"").replace(Wt,function(){return"],|"}).replace(Xt,function(e,t){return"["+ar(t)}).replace(Yt,function(){return'"],["'}).replace(Gt,function(){return'",'})+"]";return w(["return ["+e+"]"])()}var Jt={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var Zt="000000";var Kt=function(e,t){return(Zt+(t||0)).slice(-e)};var Qt="\\u00";var er=function(e){var t=e.charCodeAt(0),r=Jt[t];if(r){return r}return Qt+Kt(2,t.toString(16))};var tr=/[\x00-\x1f\x22\x5c]/g;function rr(e){tr.lastIndex=0;return'"'+(tr.test(e)?String(e).replace(tr,er):e)+'"'}var ar=typeof JSON!=="undefined"?JSON.stringify:rr;avalon.scan=function(e,t){e=e||m;var r=t?[].concat(t):[];_r(e,r)};var nr=k("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function ir(t,r,a){var n=setTimeout(function(){var e=t.innerHTML;clearTimeout(n);if(e===a){r()}else{ir(t,r,e)}})}function or(e,t){var r=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",r);if(t.$events){t.$events.expr=e.tagName+'[avalonctrl="'+r+'"]'}}function lr(e,t,r){var a=e.getAttribute(t);if(a){for(var n=0,i;i=r[n++];){if(i.hasOwnProperty(a)&&typeof i[a]==="function"){return i[a]}}}}function sr(e,t){for(var r=0,a;a=e[r++];){a.vmodels=t;I[a.type].init(a);avalon.injectBinding(a);if(a.getter&&a.element.nodeType===1){a.element.removeAttribute(a.name)}}e.length=0}var cr=x&&L.MutationObserver?function(e){var t=e.firstChild,r;while(t){var a=t.nextSibling;if(t.nodeType===3){if(r){r.nodeValue+=t.nodeValue;e.removeChild(t)}else{r=t}}else{r=null}t=a}}:0;var fr=/^\s*::/;var ur=/ms-(\w+)-?(.*)/;var vr=k("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var dr=k("value,title,alt,checked,selected,disabled,readonly,enabled,href,src");function pr(e,t){return e.priority-t.priority}var hr=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class)$/;var mr=/^on\-[\w-]+$/;function yr(e,t){var r=e.attributes;var a={};for(var n=0,i;i=r[n++];){var o=i.name;if(i.specified&&!hr.test(o)){var l=ot(i.name);if(/^on\-[\w-]+$/.test(o)){a[l]=lr(e,o,t)}else{a[l]=ct(i.value)}}}return a}function gr(e,t,r){var a=true;if(t.length){var n=Tr?Tr(e):e.attributes;var i=[];var o={};for(var l=0,s;s=n[l++];){var c=s.name;if(o[c]){continue}o[c]=1;if(s.specified){if(r=c.match(ur)){var f=r[1];var u=r[2]||"";var v=s.value;if(vr[f]){u=f;f="on"}else if(dr[f]){u=f;f="attr";c="ms-"+f+"-"+u;N("warning!请改用"+c+"代替"+s.name+"!")}if(I[f]){var d=v.replace(fr,"");var p=v!==d;var h={type:f,param:u,element:e,name:c,expr:d,oneTime:p,uuid:"_"+ ++b,priority:(I[f].priority||f.charCodeAt(0)*10)+(Number(u.replace(/\D/g,""))||0)};if(f==="html"||f==="text"){var m=Hr(v).filters;h.expr=h.expr.replace(m,"");h.filters=m.replace(Sr,function(){h.type="html";h.group=1;return""}).trim()}else if(f==="duplex"){var y=c}else if(c==="ms-if-loop"){h.priority+=100}else if(c==="ms-attr-value"){var g=c}i.push(h)}}}}if(i.length){i.sort(pr);if(y&&g&&e.nodeName==="INPUT"&&e.type==="text"){N("warning!一个控件不能同时定义ms-attr-value与"+y)}for(l=0;h=i[l];l++){f=h.type;if(br.test(f)){return sr(i.slice(0,l+1),t)}else if(a){a=!xr.test(f)}}sr(i,t)}}if(a&&!nr[e.tagName]&&(Wr(e)?e.msResolved:1)){cr&&cr(e);Er(e,t)}}var br=/^if|widget|repeat$/;var xr=/^each|with|html|include$/;if(!p){var $r=new q(512);var wr=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Cr=/^['"]/,Nr=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,kr=/&amp;/g;var Tr=function(e){var t=e.outerHTML;if(t.slice(0,2)==="</"||!t.trim()){return[]}var r=t.match(Nr)[0];if(r.slice(-1)===">")r=r.slice(0,-1);var a=[],n,i;var o=$r.get(r);if(o){return o}while(n=wr.exec(r)){i=n[2];if(i){i=(Cr.test(i)?i.slice(1,-1):i).replace(kr,"&")}var l=n[1].toLowerCase();var s={name:l,specified:true,value:i||""};a.push(s)}return $r.put(r,a)}}function Er(e,t){var r=avalon.slice(e.childNodes);Ar(r,t)}function Ar(e,t){function r(e){setTimeout(function(){avalon.component(e)})}for(var a=0,n;n=e[a++];){switch(n.nodeType){case 1:var i=n;if(!i.msResolved&&i.parentNode&&i.parentNode.nodeType===1){var o=Wr(i);if(o){var l=i.localName?i.localName.replace(o+":",""):i.nodeName;var s=o+":"+ot(l);Ir.push({library:o,element:i,fullName:s,widget:l,vmodels:t,name:"widget"});if(avalon.components[s]){r(s)}}}_r(n,t);if(n.msHasEvent){avalon.fireDom(n,"datasetchanged",{bubble:n.msHasEvent})}break;case 3:if(re.test(n.nodeValue)){Fr(n,t,a)}break}}}function _r(e,t,r){var a=e.getAttribute("ms-skip");if(!e.getAttributeNode){return N("warning "+e.tagName+" no getAttributeNode method")}var n=e.getAttributeNode("ms-important");var i=e.getAttributeNode("ms-controller");if(typeof a==="string"){return}else if(r=n||i){var o=avalon.vmodels[r.value];if(!o){return}t=r===n?[o]:[o].concat(t);var l=r.name;e.removeAttribute(l);avalon(e).removeClass(l);or(e,o)}gr(e,t);if(o){setTimeout(function(){o.$fire("ms-scan-end",e)})}}var Sr=/\|\s*html(?:\b|$)/,Or=/\|\|/g,Mr=/&lt;/g,Lr=/&gt;/g,jr=/(['"])(\\\1|.)+?\1/g,Dr=/\r?\n/g;function Hr(e){if(e.indexOf("|")>0){var t=e.replace(jr,function(e){return Array(e.length+1).join("1")});var r=t.replace(Or,"ᄢ㍄").indexOf("|");if(r>-1){return{type:"text",filters:e.slice(r).trim(),expr:e.slice(0,r)}}}return{type:"text",expr:e,filters:""}}function Pr(e){var t=[],r,a=0,n;do{n=e.indexOf(ee,a);if(n===-1){break}r=e.slice(a,n);if(r){t.push({expr:r})}a=n+ee.length;n=e.indexOf(te,a);if(n===-1){break}r=e.slice(a,n);if(r){t.push(Hr(r.replace(Dr,"")))}a=n+te.length}while(1);r=e.slice(a);if(r){t.push({expr:r})}return t}function Fr(e,t,r){var a=[],n=Pr(e.data);if(n.length){for(var i=0,o;o=n[i++];){var l=j.createTextNode(o.expr);if(o.type){o.expr=o.expr.replace(fr,function(){o.oneTime=true;return""});o.element=l;o.filters=o.filters.replace(Sr,function(){o.type="html";return""});o.pos=r*1e3+i;a.push(o)}D.appendChild(l)}e.parentNode.replaceChild(D,e);if(a.length)sr(a,t)}}var Rr=function(){this.queue=[]};Rr.prototype={render:function(e){if(!this.locked){this.locked=e?m.offsetHeight+10:1;var t=this;avalon.nextTick(function(){t.flush()})}},flush:function(){for(var e=0,t;t=this.queue[e++];){t.update&&t.update()}this.locked=0;this.queue=[]}};var Br=new Rr;var Ir=[];var Vr=[];var qr={$construct:function(){return avalon.mix.apply(null,arguments)},$ready:$,$init:$,$dispose:$,$container:null,$childReady:$,$replace:false,$extend:null,$$template:function(e){return e}};avalon.components={};avalon.component=function(M,e){if(e){avalon.components[M]=avalon.mix({},qr,e)}for(var t=0,r;r=Ir[t];t++){if(M===r.fullName){Ir.splice(t,1);t--;(function(r,e,a,t){if(!avalon.contains(j,a)||a.msResolved){avalon.Array.remove(Ir,r);return}var n=1;var i=r.library;var o=avalon.libraries[i]||qr;if(a.getAttribute("ms-attr-identifier")){return}var l=yr(a,r.vmodels);var s=zr(r.vmodels,l.config||r.fullName);var c=l.$id||l.identifier||H(t);delete l.config;delete l.$id;delete l.identifier;var f={};var u=avalon.components[e.$extend];if(u){avalon.mix(true,f,u);f=u.$construct.call(a,f,{},{})}else{avalon.mix(true,f,e)}f=avalon.components[M].$construct.call(a,f,s,l);f.$refs={};f.$id=c;var v=f.$slot;var d=f.$replace;var p=f.$container;var h=f.$template;delete f.$slot;delete f.$replace;delete f.$container;delete f.$construct;var m=avalon.define(f)||{};a.msResolved=1;m.$init(m,a);o.$init(m,a);var y=a.childNodes;var g={},b;for(var x=0,$;$=y[x++];){var w=$.nodeType===1&&$.getAttribute("slot")||v;if(w){if(g[w]){g[w].push($)}else{g[w]=[$]}}}if(m.$$template){avalon.clearHTML(a);a.innerHTML=m.$$template(h)}for(x in g){if(m.hasOwnProperty(x)){var C=g[x];if(C.length){var N=D.cloneNode(true);for(var k=0;b=C[k++];){N.appendChild(b)}m[x]=N}g[x]=null}}g=null;var T=a.children[0]||a.firstChild;if(d){a.parentNode.replaceChild(T,a);T.msResolved=1;var E=a.style.cssText;var A=a.className;a=r.element=T;a.style.cssText+=";"+E;if(A){avalon(a).addClass(A)}}if(p){p.appendChild(a)}avalon.fireDom(a,"datasetchanged",{library:i,vm:m,childReady:1});var _=0;var S=avalon.bind(a,"datasetchanged",function(e){if(e.childReady&&e.library===i){n+=e.childReady;if(m!==e.vm){m.$refs[e.vm.$id]=e.vm;if(e.childReady===-1){_++;m.$childReady(m,a,e)}e.stopPropagation()}}if(n===0){var t=setTimeout(function(){clearTimeout(t);m.$ready(m,a,r.vmodels);o.$ready(m,a,r.vmodels)},_?Math.max(_*17,100):17);avalon.unbind(a,"datasetchanged",S);r.rollback=function(){try{m.$dispose(m,a);o.$dispose(m,a)}catch(e){}delete avalon.vmodels[m.$id]};ze(r,Vr);if(L.chrome){a.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(Xe)})}}});_r(a,[m].concat(r.vmodels));avalon.vmodels[m.$id]=m;if(!a.childNodes.length){avalon.fireDom(a,"datasetchanged",{library:i,vm:m,childReady:-1})}else{var O=setTimeout(function(){clearTimeout(O);avalon.fireDom(a,"datasetchanged",{library:i,vm:m,childReady:-1})},17)}})(r,avalon.components[M],r.element,r.widget)}}};function zr(e,t){if(t){for(var r=0,a;a=e[r++];){if(a.hasOwnProperty(t)&&typeof a[t]==="object"){var n=a[t];return n.$model||n;break}}}return{}}avalon.libraries=[];avalon.library=function(e,t){if(j.namespaces){j.namespaces.add(e,"http://www.w3.org/1999/xhtml")}avalon.libraries[e]=avalon.mix({$init:$,$ready:$,$dispose:$},t||{})};avalon.library("ms");function Wr(e){if(e.scopeName&&e.scopeName!=="HTML"){return e.scopeName}var t=e.nodeName.toLowerCase();var r=t.indexOf(":");if(r>0){return t.slice(0,r)}}var Xr=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var Yr={};Xr.replace(o,function(e){Yr[e.toLowerCase()]=e});var Gr={"accept-charset":"acceptCharset",char:"ch",charoff:"chOff",class:"className",for:"htmlFor","http-equiv":"httpEquiv"};var Ur=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");Ur.replace(o,function(e){Gr[e.toLowerCase()]=e});var Jr=avalon.directive("attr",{init:function(e){e.expr=qt(e.expr.trim());if(e.type==="include"){var t=e.element;ya(t,e);e.includeRendered=lr(t,"data-include-rendered",e.vmodels);e.includeLoaded=lr(t,"data-include-loaded",e.vmodels);var r=e.includeReplace=!!avalon(t).data("includeReplace");if(avalon(t).data("includeCache")){e.templateCache={}}e.start=j.createComment("ms-include");e.end=j.createComment("ms-include-end");if(r){e.element=e.end;e._element=t;t.parentNode.insertBefore(e.start,t);t.parentNode.insertBefore(e.end,t.nextSibling)}else{t.insertBefore(e.start,t.firstChild);t.appendChild(e.end)}}},update:function(e){var t=this.element;var r=this.param;if(r==="href"||r==="src"){if(typeof e==="string"&&!m.hasAttribute){e=e.replace(/&amp;/g,"&")}t[r]=e;if(L.chrome&&t.tagName==="EMBED"){var a=t.parentNode;var n=document.createComment("ms-src");a.replaceChild(n,t);a.replaceChild(t,n)}}else{var i=e===false||e===null||e===void 0;if(!p&&Gr[r]){r=Gr[r]}var o=Yr[r];if(typeof t[o]==="boolean"){t[o]=!!e;if(!e){i=true}}if(i){return t.removeAttribute(r)}var l=c.test(t)?false:j.namespaces&&at(t)?true:r in t.cloneNode(false);if(l){t[r]=e+""}else{t.setAttribute(r,e)}}}});"title,alt,src,value,css,include,href".replace(o,function(e){I[e]=Jr});avalon.directive("class",{init:function(e){var t=e.param;var r=e.type;if(!t||isFinite(t)){e.param="";I.effect.init(e)}else{N("ms-"+r+'-xxx="yyy"这种用法已经过时,请使用ms-'+r+'="xxx:yyy"');e.expr="["+ar(t)+","+e.expr+"]";e.oldStyle=t}if(r==="hover"||r==="active"){if(!e.hasBindEvent){var a=e.element;var n=avalon(a);var i="mouseenter";var o="mouseleave";if(r==="active"){a.tabIndex=a.tabIndex||-1;i="mousedown";o="mouseup";var l=n.bind("mouseleave",function(){e.toggleClass&&n.removeClass(e.newClass)})}}var s=n.bind(i,function(){e.toggleClass&&n.addClass(e.newClass)});var c=n.bind(o,function(){e.toggleClass&&n.removeClass(e.newClass)});e.rollback=function(){n.unbind("mouseleave",l);n.unbind(i,s);n.unbind(o,c)};e.hasBindEvent=true}},update:function(e){var t=this;var r=avalon(this.element);t.newClass=e[0];t.toggleClass=!!e[1];if(t.oldClass&&t.newClass!==t.oldClass){r.removeClass(t.oldClass)}t.oldClass=t.newClass;if(t.type==="class"){if(t.oldStyle){r.toggleClass(t.oldStyle,!!e[1])}else{r.toggleClass(t.newClass,t.toggleClass)}}}});"hover,active".replace(o,function(e){I[e]=I["class"]});avalon.directive("css",{init:I.attr.init,update:function(e){avalon(this.element).css(this.param,e)}});avalon.directive("data",{priority:100,update:function(e){var t=this.element;var r="data-"+this.param;if(e&&typeof e==="object"){t[r]=e}else{t.setAttribute(r,String(e))}}});var Zr=/^(?:checkbox|radio)$/;var Kr=/^(?:radio|checked)$/;var Qr=/^(file|button|reset|submit|checkbox|radio|range)$/;var ea=avalon.directive("duplex",{priority:2e3,init:function(a,t){var n=a.element;var e=a.vmodels;a.changed=lr(n,"data-duplex-changed",e)||$;var r=[];var i=k("string,number,boolean,checked");if(n.type==="radio"&&a.param===""){a.param="checked"}a.param.replace(v,function(e){if(Zr.test(n.type)&&Kr.test(e)){if(e==="radio")N("ms-duplex-radio已经更名为ms-duplex-checked");e="checked";a.isChecked=true;a.xtype="radio"}if(e==="bool"){e="boolean";N("ms-duplex-bool已经更名为ms-duplex-boolean")}else if(e==="text"){e="string";N("ms-duplex-text已经更名为ms-duplex-string")}if(i[e]){t=true}avalon.Array.ensure(r,e)});if(!t){r.push("string")}a.param=r.join("-");if(!a.xtype){a.xtype=n.tagName==="SELECT"?"select":n.type==="checkbox"?"checkbox":n.type==="radio"?"radio":/^change/.test(n.getAttribute("data-duplex-event"))?"change":"input"}var o=a.bound=function(e,t){if(n.addEventListener){n.addEventListener(e,t,false)}else{n.attachEvent("on"+e,t)}var r=a.rollback;a.rollback=function(){n.avalonSetter=null;avalon.unbind(n,e,t);r&&r()}};function l(e){a.changed.call(this,e,a)}var s=false;function c(){s=true}function f(){s=false;setTimeout(u)}var u=function(e){var t=n.value;if(s||t===a.oldValue||a.pipe===null)return;var r=a.pipe(t,a,"get");try{a.oldValue=t;a.setter(r);l.call(n,r)}catch(e){N(e)}};switch(a.xtype){case"radio":a.bound("click",function(){var e=a.pipe(n.value,a,"get");try{a.setter(e);l.call(n,e)}catch(e){N(e)}});break;case"checkbox":o(p?"change":"click",function(){var e=n.checked?"ensure":"remove";var t=a.getter.apply(0,a.vmodels);if(!Array.isArray(t)){N("ms-duplex应用于checkbox上要对应一个数组");t=[t]}var r=a.pipe(n.value,a,"get");avalon.Array[e](t,r);l.call(n,t)});break;case"change":o("change",u);break;case"input":if(!x){o("input",u);o("compositionstart",c);o("compositionend",f);o("DOMAutoComplete",u)}else{if(x>8){if(x===9){o("keyup",u)}o("input",u)}else{o("propertychange",function(e){if(e.propertyName==="value"){u()}})}o("dragend",function(){setTimeout(function(){u()},17)})}break;case"select":o("change",function(){var e=avalon(n).val();if(Array.isArray(e)){e=e.map(function(e){return a.pipe(e,a,"get")})}else{e=a.pipe(e,a,"get")}if(e+""!==a.oldValue){try{a.setter(e)}catch(e){N(e)}}});o("datasetchanged",function(e){if(e.bubble==="selectDuplex"){var t=a._value;var r=Array.isArray(t)?t.map(String):t+"";avalon(n).val(r);n.oldValue=r+"";l.call(n,r)}});break}if(a.xtype==="input"&&!Qr.test(n.type)){if(n.type!=="hidden"){o("focus",function(){n.msFocus=true});o("blur",function(){n.msFocus=false})}n.avalonSetter=u;oa(function(){if(avalon.contains(m,n)){if(!this.msFocus){u()}}else if(!n.msRetain){return false}})}},update:function(e){var t=this.element,r=this,a;if(!this.init){for(var n in avalon.vmodels){var i=avalon.vmodels[n];i.$fire("avalon-ms-duplex-init",r)}var o=r.pipe||(r.pipe=ra);o(null,r,"init");this.init=1}switch(this.xtype){case"input":case"change":a=this.pipe(e,this,"set");if(a!==this.oldValue){var l=false;if(t.msFocus){try{var s=la(t);if(s.start===s.end){s=s.start;l=true}}catch(e){}}t.value=r.oldValue=a;if(l){sa(t,s,s)}}break;case"radio":a=r.isChecked?!!e:e+""===t.value;if(x===6){setTimeout(function(){t.defaultChecked=a;t.checked=a},31)}else{t.checked=a}break;case"checkbox":var c=[].concat(e);a=this.pipe(t.value,this,"get");t.checked=c.indexOf(a)>-1;break;case"select":r._value=e;if(!t.msHasEvent){t.msHasEvent="selectDuplex"}else{avalon.fireDom(t,"datasetchanged",{bubble:t.msHasEvent})}break}}});if(x){avalon.bind(j,"selectionchange",function(e){var t=j.activeElement||{};if(!t.msFocus&&t.avalonSetter){t.avalonSetter()}})}function ta(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(e,t){return!t.oldValue}},string:{get:function(e){return e},set:ta},boolean:{get:function(e){return e==="true"},set:ta},number:{get:function(e,t){var r=parseFloat(e+"");if(-e===-r){return r}var a=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(a[0]){case"strong":return 0;case"medium":return e===""?"":0;case"weak":return e}},set:ta}};function ra(r,a,n){a.param.replace(v,function(e){var t=avalon.duplexHooks[e];if(t&&typeof t[n]==="function"){r=t[n](r,a)}});return r}var aa,na=[];avalon.tick=function(e){if(na.push(e)===1){aa=setInterval(ia,60)}};function ia(){for(var e=na.length-1;e>=0;e--){var t=na[e];if(t()===false){na.splice(e,1)}}if(!na.length){clearInterval(aa)}}var oa=$;new function(){try{var t={};var e=HTMLInputElement.prototype;var r=HTMLTextAreaElement.prototype;function a(e){t[this.tagName].call(this,e);if(!this.msFocus&&this.avalonSetter){this.avalonSetter()}}var n=HTMLInputElement.prototype;Object.getOwnPropertyNames(n);t["INPUT"]=Object.getOwnPropertyDescriptor(e,"value").set;Object.defineProperty(e,"value",{set:a});t["TEXTAREA"]=Object.getOwnPropertyDescriptor(r,"value").set;Object.defineProperty(r,"value",{set:a})}catch(e){oa=avalon.tick}};function la(e){var t=NaN,r=NaN;if(e.setSelectionRange){t=e.selectionStart;r=e.selectionEnd}else if(document.selection&&document.selection.createRange){var a=document.selection.createRange();t=0-a.duplicate().moveStart("character",-1e5);r=t+a.text.length}return{start:t,end:r}}function sa(e,t,r){if(!e.value||e.readOnly)return;if(e.createTextRange){var a=e.createTextRange();a.collapse(true);a.moveStart("character",t);a.select()}else{e.selectionStart=t;e.selectionEnd=r}}avalon.directive("effect",{priority:5,init:function(e){var t=e.expr,r,a;var n=t.replace(ae,function(e){return e.replace(/./g,"0")}).indexOf(":");if(n===-1){r=t;a=true}else{r=t.slice(0,n);a=t.slice(n+1)}if(!re.test(t)){r=ar(r)}else{r=qt(r)}e.expr="["+r+","+a+"]"},update:function(e){var t=e[0];var r=this.element;if(r.getAttribute("data-effect-name")===t){return}else{r.removeAttribute("data-effect-driver")}var a=r.style;var n=L.getComputedStyle?L.getComputedStyle(r):null;var i=false;if(n&&(ca||fa)){var o=a[da]||n[da];if(o&&o!=="0s"){r.setAttribute("data-effect-driver","t");i=true}if(!i){o=a[pa]||n[pa];if(o&&o!=="0s"){r.setAttribute("data-effect-driver","a");i=true}}}if(!i){if(avalon.effects[t]){r.setAttribute("data-effect-driver","j");i=true}}if(i){r.setAttribute("data-effect-name",t)}}});avalon.effects={};avalon.effect=function(e,t){avalon.effects[e]=t};var ca=false;var fa=false;var ua;var va;var da=avalon.cssName("transition-duration");var pa=avalon.cssName("animation-duration");new function(){var e={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"};var t;for(var r in e){if(L[r]){t=e[r];break}try{var a=document.createEvent(r);t=e[r];break}catch(e){}}if(typeof t==="string"){ca=true;ua=t}e={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var n;for(r in e){if(L[r]){n=e[r];break}}if(typeof n==="string"){ca=true;va=n}};var ha=[];function ma(e,t){if(!e||e.nodeType!==1){return null}if(t){var r=t.effectName;var a=t.effectDriver}else{r=e.getAttribute("data-effect-name");a=e.getAttribute("data-effect-driver")}if(!r||!a){return null}var n=ha.pop()||new xa;n.el=e;n.driver=a;n.useCss=a!=="j";if(n.useCss){t&&avalon(e).addClass(t.effectClass);n.cssEvent=a==="t"?ua:va}n.name=r;n.callbacks=avalon.effects[r]||{};return n}function ya(e,t){var r=e.getAttribute("data-effect-name");if(r){t.effectName=r;t.effectDriver=e.getAttribute("data-effect-driver");var a=+e.getAttribute("data-effect-stagger");t.effectLeaveStagger=+e.getAttribute("data-effect-leave-stagger")||a;t.effectEnterStagger=+e.getAttribute("data-effect-enter-stagger")||a;t.effectClass=e.className||NaN}}function ga(e){return e.replace(/^[\S]/g,function(e){return e.toUpperCase()})}var ba=new Rr;function xa(){}xa.prototype={contrustor:xa,enterClass:function(){return $a(this,"enter")},leaveClass:function(){return $a(this,"leave")},actionFun:function(t,r,a){if(document.hidden){return}var n=this;var i=n.el;var o=t==="leave";t=o?"leave":"enter";var e=o?"enter":"leave";wa(n,"abort"+ga(e));wa(n,"before"+ga(t));if(!o)r(i);var l=function(e){i.removeEventListener(n.cssEvent,n.cssCallback);if(o){r(i);avalon(i).removeClass(n.cssClass)}else{if(n.driver==="a"){avalon(i).removeClass(n.cssClass)}}if(e!==true){wa(n,"after"+ga(t));a&&a(i)}n.dispose()};if(n.useCss){if(n.cssCallback){n.cssCallback(true)}n.cssClass=$a(n,t);n.cssCallback=l;n.update=function(){i.addEventListener(n.cssEvent,n.cssCallback);if(!o&&n.driver==="t"){avalon(i).removeClass(n.cssClass)}};avalon(i).addClass(n.cssClass);ba.render(true);ba.queue.push(n)}else{wa(n,t,l)}},enter:function(e,t){this.actionFun.apply(this,["enter"].concat(avalon.slice(arguments)))},leave:function(e,t){this.actionFun.apply(this,["leave"].concat(avalon.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null;if(ha.unshift(this)>100){ha.pop()}}};function $a(e,t){var r=e.callbacks[t+"Class"];if(typeof r==="string")return r;if(typeof r==="function")return r();return e.name+"-"+t}function wa(e,t,r){var a=e.callbacks[t];if(a){a.call(e,e.el,r)}}var Ca=function(e,t){var r=u.call(arguments,0);if(typeof r[2]!=="function"){r.splice(2,0,$)}if(typeof r[3]!=="function"){r.splice(3,0,$)}var a=r[2];var n=r[3];var i=r[4];var o=ma(e,i);if(!o){a();n();return false}else{var l=t?"enter":"leave";o[l](a,n)}};avalon.mix(avalon.effect,{apply:Ca,append:function(e,t,r,a){return Ca(e,1,function(){t.appendChild(e)},r,a)},before:function(e,t,r,a){return Ca(e,1,function(){t.parentNode.insertBefore(e,t)},r,a)},remove:function(e,t,r,a){return Ca(e,0,function(){if(e.parentNode===t)t.removeChild(e)},r,a)}});avalon.directive("html",{update:function(e){var t=this;var r=this.element;var a=r.nodeType!==1;var n=a?r.parentNode:r;if(!n)return;e=e==null?"":e;if(r.nodeType===3){var i=H("html");n.insertBefore(j.createComment(i),r);t.element=j.createComment(i+":end");n.replaceChild(t.element,r);r=t.element}if(typeof e!=="object"){var o=avalon.parseHTML(String(e))}else if(e.nodeType===11){o=e}else if(e.nodeType===1||e.item){var l=e.nodeType===1?e.childNodes:e.item;o=D.cloneNode(true);while(l[0]){o.appendChild(l[0])}}l=avalon.slice(o.childNodes);if(a){var s=r.nodeValue.slice(0,-4);while(true){var c=r.previousSibling;if(!c||c.nodeType===8&&c.nodeValue===s){break}else{n.removeChild(c)}}n.insertBefore(o,r)}else{avalon.clearHTML(r).appendChild(o)}Ar(l,t.vmodels)}});avalon.directive("if",{priority:10,update:function(e){var t=this;var r=this.element;var a=t.stamp=+new Date;var n;var i=function(){if(a!==t.stamp)return;t.recoverNode=null};if(t.recoverNode)t.recoverNode();try{if(!r.parentNode)return;n=r.parentNode}catch(e){return}if(e){function o(){if(r.getAttribute(t.name)){r.removeAttribute(t.name);gr(r,t.vmodels)}t.rollback=null}if(r.nodeType===8){var l=t.keep;var s=avalon.effect.apply(l,1,function(){if(a!==t.stamp)return;r.parentNode.replaceChild(l,r);r=t.element=l;if(l.getAttribute("_required")){r.required=true;r.removeAttribute("_required")}if(r.querySelectorAll){avalon.each(r.querySelectorAll("[_required=true]"),function(e){e.required=true;e.removeAttribute("_required")})}o()},i);s=s===false}if(!s)o()}else{if(r.nodeType===1){if(r.required===true){r.required=false;r.setAttribute("_required","true")}try{avalon.each(r.querySelectorAll(":required"),function(e){r.required=false;e.setAttribute("_required","true")})}catch(e){}var c=t.element=j.createComment("ms-if"),f=r.nextSibling;t.recoverNode=function(){t.recoverNode=null;if(c.parentNode!==n){n.insertBefore(c,f);t.keep=r}};avalon.effect.apply(r,0,function(){t.recoverNode=null;if(a!==t.stamp)return;r.parentNode.replaceChild(c,r);t.keep=r;C.appendChild(r);t.rollback=function(){if(r.parentNode===C){C.removeChild(r)}}},i)}}}});var Na=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim;var ka=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var Ta=function(){return new(L.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var Ea=avalon.templateCache={};function Aa(e,t,r){var a=e.templateCache&&e.templateCache[t];if(a){var n=j.createDocumentFragment(),i;while(i=a.firstChild){n.appendChild(i)}return n}return avalon.parseHTML(r)}function _a(e){var t=j.createDocumentFragment();for(var r=0,a=e.length;r<a;r++){t.appendChild(e[r])}return t}avalon.directive("include",{init:I.attr.init,update:function(v){var d=this;var p=this.element;var h=d.vmodels;var m=d.includeRendered;var y=d.effectName&&d.effectClass;var g=d.templateCache;var b=d.includeReplace;var x=d.includeLoaded;var $=b?p.parentNode:p;var w=d._element;d.recoverNodes=d.recoverNodes||avalon.noop;var e=function(e){var t=d._stamp=+new Date;if(x){var r=x.apply($,[e].concat(h));if(typeof r==="string")e=r}if(m){ir($,function(){m.call($)},NaN)}var a=d.includeLastID||"_default";d.includeLastID=v;var n=g&&g[a]||j.createElement(p.tagName||d._element.tagName);if(y){n.className=y;$.insertBefore(n,d.start)}(g||{})[a]=n;var i=d.recoverNodes();if(i){$.insertBefore(i,d.end)}while(true){var o=d.start.nextSibling;if(o&&o!==n&&o!==d.end){n.appendChild(o)}else{break}}avalon.effect.remove(n,$,function(){if(g){if(t===d._stamp)C.appendChild(n)}},d);var l=$,s=avalon.noop,c=avalon.noop;var f=Aa(d,v,e);var u=avalon.slice(f.childNodes);if(b&&y){l=w;l.innerHTML="";l.setAttribute("ms-skip","true");$.insertBefore(l,d.end.nextSibling);s=function(){l.insertBefore(f,null)};c=function(){d.recoverNodes=avalon.noop;if(t===d._stamp){f=_a(u);$.insertBefore(f,d.end);Ar(u,h)}if(l.parentNode===$)$.removeChild(l)};d.recoverNodes=function(){d.recoverNodes=avalon.noop;return _a(u)}}else{s=function(){$.insertBefore(f,d.end);Ar(u,h)}}avalon.effect.apply(l,"enter",s,c)};if(d.param==="src"){if(typeof Ea[v]==="string"){avalon.nextTick(function(){e(Ea[v])})}else if(Array.isArray(Ea[v])){Ea[v].push(e)}else{var n=Ta();n.onreadystatechange=function(){if(n.readyState===4){var e=n.status;if(e>=200&&e<300||e===304||e===1223){var t=n.responseText;for(var r=0,a;a=Ea[v][r++];){a(t)}Ea[v]=t}else{N("ms-include load ["+v+"] error")}}};Ea[v]=[e];n.open("GET",v,true);if("withCredentials"in n){n.withCredentials=true}n.setRequestHeader("X-Requested-With","XMLHttpRequest");n.send(null)}}else{var t=v&&v.nodeType===1?v:j.getElementById(v);if(t){if(t.tagName==="NOSCRIPT"&&!(t.innerHTML||t.fixIE78)){n=Ta();n.open("GET",location,false);n.send(null);var r=j.getElementsByTagName("noscript");var a=(n.responseText||"").match(Na)||[];var i=a.length;for(var o=0;o<i;o++){var l=r[o];if(l){l.style.display="none";l.fixIE78=(a[o].match(ka)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){e(t.fixIE78||t.value||t.innerText||t.innerHTML)})}}}});var Sa=/\(([^)]*)\)/;var Oa=avalon.directive("on",{priority:3e3,init:function(e){var t=e.expr;e.type="on";var r=e.param.replace(/-\d+$/,"");if(typeof Oa[r+"Hook"]==="function"){Oa[r+"Hook"](e)}if(t.indexOf("(")>0&&t.indexOf(")")>-1){var a=(t.match(Sa)||["",""])[1].trim();if(a===""||a==="$event"){t=t.replace(Sa,"")}}e.expr=t},update:function(e){var r=this;var t=this.element;e=function(e){var t=r.getter||$;return t.apply(this,r.args.concat(e))};var a=r.param.replace(/-\d+$/,"");if(a==="scan"){e.call(t,{type:a})}else if(typeof r.specialBind==="function"){r.specialBind(t,e)}else{var n=avalon.bind(t,a,e)}r.rollback=function(){if(typeof r.specialUnbind==="function"){r.specialUnbind()}else{avalon.unbind(t,a,n)}}}});avalon.directive("repeat",{priority:90,init:function(e){var t=e.type;e.cache={};e.enterCount=0;var r=e.element;if(r.nodeType===1){r.removeAttribute(e.name);ya(r,e);e.param=e.param||"el";e.sortedCallback=lr(r,"data-with-sorted",e.vmodels);var a=lr(r,"data-"+t+"-rendered",e.vmodels);var n=H(t);var i=j.createComment(n+":start");var o=e.element=j.createComment(n+":end");e.signature=n;e.start=i;e.template=D.cloneNode(false);if(t==="repeat"){var l=r.parentNode;l.replaceChild(o,r);l.insertBefore(i,o);e.template.appendChild(r)}else{while(r.firstChild){e.template.appendChild(r.firstChild)}r.appendChild(i);r.appendChild(o);l=r}e.element=o;if(a){var s=avalon.bind(l,"datasetchanged",function(){a.apply(l,l.args);avalon.unbind(l,"datasetchanged",s);l.msRendered=a})}}},update:function(e,t){var n=this;var r=this.xtype;this.enterCount+=1;var i=!t;if(i){n.$outer={};var a="$key";var o="$val";if(r==="array"){a="$first";o="$last"}for(var l=0,s;s=n.vmodels[l++];){if(s.hasOwnProperty(a)&&s.hasOwnProperty(o)){n.$outer=s;break}}}var c=this.track;if(n.sortedCallback){var f=n.sortedCallback.call(b,c);if(f&&Array.isArray(f)){c=f}}var u="move";n.$repeat=e;var v=[];var d=i&&D.cloneNode(false);var p=[];var h=this.param;var m=avalon.mix({},this.cache);var y=this.element;var g=c.length;var b=y.parentNode;var x=0;for(l=0;l<g;l++){var $=c[l];if(!m[$])x++}var w=0;for(l in m){w++}var C=(!g||x===g)&&w>10;if(C){var N=y.previousSibling;var k=n.start;while(N!==k){b.removeChild(N);N=y.previousSibling}}for(l=0;l<g;l++){$=c[l];var T=m[$];if(!T){T=Ha(this);T.$up=null;if(r==="array"){u="add";T.$id=$;var E=e[l];T[h]=E;if(Object(E)===E){E.$ups=E.$ups||{};E.$ups[h]=T}}else{u="append";T.$key=$;T.$val=e[$];T[h]={$key:T.$key,$val:T.$val}}this.cache[$]=T;var A=T.$anchor||(T.$anchor=y.cloneNode(false));A.nodeValue=this.signature;Da(n,d,T,v,i&&!n.effectDriver);Pa(T,n,r)}else{v.push({});m[$]=true}if(this.enterCount===1){T.$active=false;T.$oldIndex=T.$index;T.$active=true;T.$index=l}if(r==="array"){T.$first=l===0;T.$last=l===g-1}else{T.$val=Te(e[$])}p.push(T)}this.proxies=p;if(i&&!n.effectDriver){b.insertBefore(d,y);v.forEach(function(e){Ar(e.nodes||[],e.vmodels);e.nodes=e.vmodels=null})}else{var _=n.staggerIndex=0;for($ in m){if(m[$]!==true){u="del";!C&&ja(m[$].$anchor,n,true);za(this.cache,$,h);m[$]=null}}for(l=0;l<g;l++){T=p[l];$=r==="array"?T.$id:T.$key;var S=p[l-1];var O=S?S.$anchor:n.start;if(!m[$]){(function(e,t){var r=e.nodes;var a=e.vmodels;if(r){_=La(n.effectEnterStagger,function(){b.insertBefore(e.content,t.nextSibling);Ar(r,a);!i&&Ma(r,1,n)},_)}e.nodes=e.vmodels=null})(v[l],O)}else if(T.$index!==T.$oldIndex){(function(r,a){_=La(n.effectEnterStagger,function(){var e=ja(r.$anchor);var t=avalon.slice(e.childNodes);b.insertBefore(e,a.nextSibling);Ma(t,1,n)},_)})(T,O)}}}if(!e.$track){for($ in this.cache){za(this.cache,$,h)}}(function(e){b.args=e;if(b.msRendered){b.msRendered.apply(b,e)}})(Q.newWatch?arguments:[u]);var M=setTimeout(function(){clearTimeout(M);avalon.fireDom(b,"datasetchanged",{bubble:b.msHasEvent})});this.enterCount-=1}});"with,each".replace(o,function(e){I[e]=avalon.mix({},I.repeat,{priority:1400})});function Ma(e,t,r){for(var a=0,n;n=e[a++];){if(n.className===r.effectClass){avalon.effect.apply(n,t,$,$,r)}}}function La(e,t,r){if(e){setTimeout(t,++r*e)}else{t()}return r}function ja(e,t,r){var a=D.cloneNode(false);var n=e;var i=n.nodeValue;var o=t&&Math.max(+t.staggerIndex,0);var l=avalon.slice(n.parentNode.childNodes);var s=l.indexOf(n);while(true){var c=l[--s];if(!c||String(c.nodeValue).indexOf(i)===0){break}if(!r&&t&&c.className===t.effectClass){e=c;(function(e){t.staggerIndex=La(t.effectLeaveStagger,function(){avalon.effect.apply(e,0,$,function(){a.appendChild(e)},t)},o)})(c)}else{a.insertBefore(c,a.firstChild)}}a.appendChild(n);return a}function Da(e,t,r,a,n){var i=e.template.cloneNode(true);var o=avalon.slice(i.childNodes);i.appendChild(r.$anchor);n&&t.appendChild(i);var l=e.param||"el";var s=r[l],c;c=[r].concat(e.vmodels);var f={nodes:o,vmodels:c,content:i};a.push(f)}function Ha(e){var t=e.xtype==="object"?Va:Ra;var r=t(e);var a=r.$anchor||(r.$anchor=e.element.cloneNode(false));a.nodeValue=e.signature;r.$outer=e.$outer;return r}function Pa(r,a,e){if(e==="array"){r.$remove=function(){a.$repeat.removeAt(r.$index)};var t=a.param;r.$watch(t,function(e){var t=r.$index;a.$repeat[t]=e})}else{r.$watch("$val",function e(t){a.$repeat[r.$key]=t})}}var Fa=[];function Ra(e,t){var r=e.param||"el";for(var a=0,n=Fa.length;a<n;a++){var i=Fa[a];if(i&&i.hasOwnProperty(r)){Fa.splice(a,1);t=i;break}}if(!t){t=Ba(r)}return t}function Ba(e){var t={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:false,$last:false,$remove:avalon.noop};t[e]=NaN;var r={$last:1,$first:1,$index:1};r[e]=1;var a=ye(t,{force:r});a.$id=H("$proxy$each");return a}var Ia=[];function Va(e){var t=e.param||"el";return Ia.pop()||qa(t)}function qa(e){var t={$key:"",$val:NaN,$index:0,$oldIndex:0,$outer:{},$anchor:null};t[e]=NaN;var r={$key:1,$val:1,$index:1};r[e]=1;var a=ye(t,{force:r});a.$id=H("$proxy$with");return a}function za(e,t,r){var a=e[t];if(a){var n=a.$id.indexOf("$proxy$each")===0?Fa:Ia;a.$outer={};for(var i in a.$events){var o=a.$events[i];if(Array.isArray(o)){o.length=0;if(i===r){a[r]=NaN}else if(i==="$val"){a.$val=NaN}}}if(n.unshift(a)>Q.maxRepeatSize){n.pop()}delete e[t]}}avalon.directive("text",{update:function(e){var t=this.element;e=e==null?"":e;if(t.nodeType===3){try{t.data=e}catch(e){}}else{if("textContent"in t){t.textContent=e}else{t.innerText=e}}}});function Wa(e,t){var r="_"+e;if(!Wa[r]){var a=j.createElement(e);m.appendChild(a);if(p){t=getComputedStyle(a,null).display}else{t=a.currentStyle.display}m.removeChild(a);Wa[r]=t}return Wa[r]}avalon.parseDisplay=Wa;avalon.directive("visible",{init:function(e){ya(e.element,e)},update:function(e){var t=this,r=this.element,a;var n=!this.effectName;if(!this.stamp){a=this.stamp=+new Date;if(e){r.style.display=t.display||"";if(avalon(r).css("display")==="none"){r.style.display=t.display=Wa(r.nodeName)}}else{r.style.display="none"}return}a=this.stamp=+new Date;if(e){avalon.effect.apply(r,1,function(){if(a!==t.stamp)return;var e=r.getAttribute("data-effect-driver")||"a";if(n){r.style.display=t.display||""}if(e==="a"||e==="t"){if(avalon(r).css("display")==="none"){r.style.display=t.display||Wa(r.nodeName)}}})}else{avalon.effect.apply(r,0,function(){if(a!==t.stamp)return;r.style.display="none"})}}});var Xa=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var Ya=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var Ga=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi;var Ua={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};var Ja=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var Za=/([^\#-~| |!])/g;function Ka(e,t,r,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=!isFinite(+e)?0:+e,i=!isFinite(+t)?3:Math.abs(t),o=a||",",l=r||".",s="",c=function(e,t){var r=Math.pow(10,t);return""+(Math.round(e*r)/r).toFixed(t)};s=(i?c(n,i):""+Math.round(n)).split(".");if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)}if((s[1]||"").length<i){s[1]=s[1]||"";s[1]+=new Array(i-s[1].length+1).join("0")}return s.join(l)}var Qa=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,r){t=t||30;r=typeof r==="string"?r:"...";return e.length>t?e.slice(0,t-r.length)+r:String(e)},$filter:function(e){for(var t=1,r=arguments.length;t<r;t++){var a=arguments[t];var n=avalon.filters[a[0]];if(typeof n==="function"){var i=[e].concat(a.slice(1));e=n.apply(null,i)}}return e},camelize:ot,sanitize:function(e){return e.replace(Xa,"").replace(Ga,function(e,t){var r=e.toLowerCase().match(/<(\w+)\s/);if(r){var a=Ua[r[1]];if(a){e=e.replace(a,function(e,t,r){var a=r.charAt(0);return t+"="+a+"javascript:void(0)"+a})}}return e.replace(Ya," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(Ja,function(e){var t=e.charCodeAt(0);var r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(Za,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,r){return(t||"￥")+Ka(e,isFinite(r)?r:2)},number:Ka};new function(){function p(e){return parseInt(e,10)||0}function o(e,t,r){var a="";if(e<0){a="-";e=-e}e=""+e;while(e.length<t)e="0"+e;if(r)e=e.substr(e.length-t);return a+e}function e(r,a,n,i){return function(e){var t=e["get"+r]();if(n>0||t>-n)t+=n;if(t===0&&n===-12){t=12}return o(t,a,i)}}function t(n,i){return function(e,t){var r=e["get"+n]();var a=(i?"SHORT"+n:n).toUpperCase();return t[a][r]}}function r(e){var t=-1*e.getTimezoneOffset();var r=t>=0?"+":"";r+=o(Math[t>0?"floor":"ceil"](t/60),2)+o(Math.abs(t%60),2);return r}function a(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var h={yyyy:e("FullYear",4),yy:e("FullYear",2,0,true),y:e("FullYear",1),MMMM:t("Month"),MMM:t("Month",true),MM:e("Month",2,1),M:e("Month",1,1),dd:e("Date",2),d:e("Date",1),HH:e("Hours",2),H:e("Hours",1),hh:e("Hours",2,-12),h:e("Hours",1,-12),mm:e("Minutes",2),m:e("Minutes",1),ss:e("Seconds",2),s:e("Seconds",1),sss:e("Milliseconds",3),EEEE:t("Day"),EEE:t("Day",true),a:a,Z:r};var m=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var y=/^\/Date\((\d+)\)\/$/;Qa.date=function(t,e){var r=Qa.date.locate,a="",n=[],i,o;e=e||"mediumDate";e=r[e]||e;if(typeof t==="string"){if(/^\d+$/.test(t)){t=p(t)}else if(y.test(t)){t=+RegExp.$1}else{var l=t.trim();var s=[0,0,0,0,0,0,0];var c=new Date(0);l=l.replace(/^(\d+)\D(\d+)\D(\d+)/,function(e,t,r,a){var n=a.length===4?[a,t,r]:[t,r,a];s[0]=p(n[0]);s[1]=p(n[1])-1;s[2]=p(n[2]);return""});var f=c.setFullYear;var u=c.setHours;l=l.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(e,t,r,a,n){s[3]=p(t);s[4]=p(r);s[5]=p(a);if(n){s[6]=Math.round(parseFloat("0."+n)*1e3)}return""});var v=0;var d=0;l=l.replace(/Z|([+-])(\d\d):?(\d\d)/,function(e,t,r,a){f=c.setUTCFullYear;u=c.setUTCHours;if(t){v=p(t+r);d=p(t+a)}return""});s[3]-=v;s[4]-=d;f.apply(c,s.slice(0,3));u.apply(c,s.slice(3));t=c}}if(typeof t==="number"){t=new Date(t)}if(avalon.type(t)!=="date"){return}while(e){o=m.exec(e);if(o){n=n.concat(o.slice(1));e=n.pop()}else{n.push(e);e=null}}n.forEach(function(e){i=h[e];a+=i?i(t,r):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return a};var n={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss",short:"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};n.SHORTMONTH=n.MONTH;Qa.date.locate=n};var en=[],tn;var rn=function(e){tn=true;var t=avalon.require;if(t&&t.checkDeps){modules["domReady!"].state=4;t.checkDeps()}while(e=en.shift()){e(avalon)}};function an(){try{m.doScroll("left");rn()}catch(e){setTimeout(an)}}if(j.readyState==="complete"){setTimeout(rn)}else if(p){j.addEventListener("DOMContentLoaded",rn)}else{j.attachEvent("onreadystatechange",function(){if(j.readyState==="complete"){rn()}});try{var nn=L.frameElement===null}catch(e){}if(m.doScroll&&nn&&L.external){an()}}avalon.bind(L,"load",rn);avalon.ready=function(e){if(!tn){en.push(e)}else{e(avalon)}};avalon.config({loader:true});avalon.ready(function(){avalon.scan(j.body)});if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var on=L.avalon;avalon.noConflict=function(e){if(e&&L.avalon===avalon){L.avalon=on}return avalon};if(e===void 0){L.avalon=avalon}return avalon});